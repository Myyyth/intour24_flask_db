{"swagger":"2.0","info":{"description":"Simple API for intour24 android application","version":"1.0.0","title":"Intour24 API","contact":{"email":"t.asapov@innopolis.ru"},"license":{"name":"Apache 2.0","url":"http://www.apache.org/licenses/LICENSE-2.0.html"}},"tags":[{"name":"sights","description":"Access to list of sights"},{"name":"excursions","description":"Access to list of excursions"},{"name":"groups","description":"Access to list of groups"},{"name":"bookings","description":"Access to list of bookings"},{"name":"payments","description":"Access to list of payments"},{"name":"tourists","description":"Access to list of tourists"}],"paths":{"/excursions/":{"get":{"tags":["excursions"],"summary":"list all excursions","operationId":"getExcursions","description":"List all excursions","produces":["application/json"],"responses":{"200":{"description":"successful","schema":{"type":"array","items":{"$ref":"#/definitions/Excursions"}}},"500":{"description":"internal error"}}}},"/excursion/{id}":{"get":{"tags":["excursions"],"summary":"get specified excursion","operationId":"getExcursionById","description":"Get specified excursion by providing id of excursion","produces":["application/json"],"parameters":[{"in":"path","name":"id","required":true,"type":"integer","description":"id of excursion"}],"responses":{"200":{"description":"successful","schema":{"$ref":"#/definitions/Excursion"}},"400":{"description":"some error occured","schema":{"$ref":"#/definitions/default_error"}},"500":{"description":"internal error"}}}},"/sights/":{"get":{"tags":["sights"],"summary":"get list of sights","operationId":"getSights","description":"List all sights","produces":["application/json"],"responses":{"200":{"description":"successful","schema":{"type":"array","items":{"$ref":"#/definitions/Sights"}}},"500":{"description":"internal error"}}}},"/sight/{id}":{"get":{"tags":["sights"],"summary":"get specified sight","operationId":"getSightById","description":"Get specified sight by providing id of excursion","produces":["application/json"],"parameters":[{"in":"path","name":"id","required":true,"type":"integer","description":"id of sight"}],"responses":{"200":{"description":"successful","schema":{"$ref":"#/definitions/Sight"}},"400":{"description":"wrong input parameter"},"500":{"description":"internal error"}}}},"/groups/{date}/sight/{id}":{"get":{"tags":["groups"],"summary":"list groups by date and id of sight","operationId":"groupsByDateAndId","produces":["application/json"],"parameters":[{"in":"path","name":"date","required":true,"type":"string","description":"date to show available groups"},{"in":"path","name":"id","required":true,"type":"integer","description":"id of sight"}],"responses":{"200":{"description":"successful","schema":{"type":"array","items":{"$ref":"#/definitions/groups_by_date_and_id"}}}}}},"/groups/":{"post":{"tags":["groups"],"summary":"updating group","operationId":"updGroup","description":"Updating group's reserved seats","consumes":["application/x-www-form-urlencoded"],"produces":["application/json"],"parameters":[{"in":"formData","name":"group_id","type":"integer","required":true,"description":"id of group that should be changed"},{"in":"formData","name":"seats_reserved","type":"integer","required":true,"description":"increment of seats that reserved by tourist"}],"responses":{"200":{"description":"successful","schema":{"$ref":"#/definitions/group_updated"}},"400":{"description":"some error occured","schema":{"$ref":"#/definitions/default_error"}},"500":{"description":"internal error"}}}},"/booking/{id}":{"get":{"tags":["bookings"],"summary":"get booking by id","description":"get booking by id","produces":["application/json"],"parameters":[{"in":"path","name":"id","type":"integer","required":true,"description":"id of booking"}],"responses":{"200":{"description":"successful","schema":{"$ref":"#/definitions/booking_by_id"}},"400":{"description":"some error occured","schema":{"$ref":"#/definitions/default_error"}}}}},"/bookingsByTouristId/{id}":{"get":{"tags":["bookings"],"summary":"get list of bookings","description":"get list of bookings of specified tourist","produces":["application/json"],"parameters":[{"in":"path","name":"id","type":"integer","required":true,"description":"tourist's id which bookings needed"}],"responses":{"200":{"description":"successful","schema":{"type":"array","items":{"$ref":"#/definitions/booking_by_tourist_id"}}},"400":{"description":"error","schema":{"$ref":"#/definitions/default_error"}}}}},"/bookings/":{"post":{"tags":["bookings"],"summary":"Add new booking","description":"Add new booking with specified parameters","consumes":["application/x-www-form-urlencoded"],"produces":["application/json"],"parameters":[{"in":"formData","name":"group_id","type":"integer","required":true,"description":"new booking on id of group"},{"in":"formData","name":"tourist_id","type":"integer","required":true,"description":"tourist that made booking"},{"in":"formData","name":"adults","type":"integer","required":true,"description":"number of adults in booking"},{"in":"formData","name":"children","type":"integer","required":true,"description":"number of children in booking"},{"in":"formData","name":"enfants","type":"integer","required":true,"description":"number of enfants in booking"},{"in":"formData","name":"total_price","type":"integer","required":true,"description":"total price of booking"},{"in":"formData","name":"create_datetime","type":"string","required":true,"description":"datetime booking has been made"}],"responses":{"200":{"description":"successful","schema":{"$ref":"#/definitions/booking_add"}},"400":{"description":"some error occured","schema":{"$ref":"#/definitions/default_error"}}}}},"/payments/":{"post":{"tags":["payments"],"consumes":["application/x-www-form-urlencoded"],"produces":["application/json"],"summary":"add new payment","description":"add new payment with specified parameters","parameters":[{"in":"formData","name":"booking_id","type":"integer","required":true,"description":"booking payment made for"},{"in":"formData","name":"payment_time","type":"string","required":true,"description":"time of payment"}],"responses":{"200":{"description":"successful","schema":{"$ref":"#/definitions/payment_add"}},"400":{"description":"some error occured","schema":{"$ref":"#/definitions/default_error"}}}}},"/checkPhone":{"post":{"tags":["tourists"],"consumes":["application/x-www-form-urlencoded"],"produces":["application/json"],"summary":"check phone for registration","parameters":[{"in":"formData","name":"phone","type":"integer","required":true,"description":"phone number"}],"responses":{"200":{"description":"successful","schema":{"$ref":"#/definitions/phone_check"}},"400":{"description":"some error occured","schema":{"$ref":"#/definitions/default_error"}}}}},"/registration":{"post":{"summary":"register user","tags":["tourists"],"consumes":["application/x-www-form-urlencoded"],"produces":["application/json"],"parameters":[{"in":"formData","name":"name","type":"string","description":"user name","required":true},{"in":"formData","name":"phone","type":"integer","description":"user phone","required":true}],"responses":{"200":{"description":"successful","schema":{"$ref":"#/definitions/register_user"}},"400":{"description":"some error occured","schema":{"$ref":"#/definitions/default_error"}}}}},"/updateTourist":{"post":{"summary":"update tourist information","tags":["tourists"],"consumes":["application/x-www-form-urlencoded"],"produces":["application/json"],"parameters":[{"in":"formData","name":"id","type":"integer","required":true,"description":"tourist id"},{"in":"formData","name":"name","type":"string","required":true,"description":"tourist name"},{"in":"formData","name":"phone","type":"integer","required":true,"description":"tourist phone"}],"responses":{"200":{"description":"successful","schema":{"$ref":"#/definitions/tourist_update"}},"400":{"description":"some error occured","schema":{"$ref":"#/definitions/default_error"}}}}},"/cancelPayment":{"delete":{"tags":["payments"],"consumes":["application/x-www-form-urlencoded"],"produces":["application/json"],"summary":"cancel payment and remove booking","parameters":[{"in":"formData","name":"booking_id","type":"integer","required":true,"description":"booking id"}],"responses":{"200":{"description":"successful","schema":{"$ref":"#/definitions/cancel_payment"}},"400":{"description":"some error occured","schema":{"$ref":"#/definitions/default_error"}}}}}},"definitions":{"Excursions":{"type":"object","required":["id","name","description","capacity","averageRating","duration","categoryId","startPlaceId","operatorId","link_to_site","images","priceId"],"properties":{"id":{"type":"integer","example":1},"name":{"type":"string","example":"Excursion name"},"description":{"type":"string","example":"Excursion description"},"capacity":{"type":"integer","example":10},"averageRating":{"type":"number","example":5},"duration":{"type":"integer","example":60},"categoryId":{"type":"integer","example":1},"startPlaceId":{"type":"integer","example":1},"operatorId":{"type":"integer","example":1},"link_to_site":{"type":"string","example":"http://swagger.io/"},"images":{"type":"array","items":{"type":"string","example":"https://avatars2.githubusercontent.com/u7658037?v=3&s=400"}},"priceId":{"type":"integer","example":1}}},"Excursion":{"type":"object","required":["id","name","description","duration","priceForChildren","priceForAdult","priceForEnfant","pickingPlace","category","rating","properties","images"],"properties":{"id":{"type":"integer","example":1},"name":{"type":"string","example":"Excursion name"},"description":{"type":"string","example":"Excursion description"},"duration":{"type":"integer","example":60},"priceForChildren":{"type":"integer","example":1000},"priceForAdult":{"type":"integer","example":1500},"priceForEnfant":{"type":"integer","example":500},"pickingPlace":{"type":"string","example":"4th street"},"category":{"type":"string","example":"bus"},"rating":{"type":"number","example":5},"properties":{"type":"array","items":{"type":"string","example":"toilet"}},"images":{"type":"array","items":{"type":"string","example":"https://avatars2.githubusercontent.com/u/7658037?v=3&s=400"}}}},"Sights":{"type":"object","required":["id","name","geoposition","images","description","cover","minPrice","maxPrice"],"properties":{"id":{"type":"integer","example":1},"name":{"type":"string","example":"Excursion name"},"geoposition":{"type":"string","example":"google coordinates"},"images":{"type":"array","items":{"type":"string","example":"https://avatars2.githubusercontent.com/u7658037?v=3&s=400"}},"description":{"type":"string","example":"Excursion description"},"cover":{"type":"string","example":"https://avatars2.githubusercontent.com/u7658037?v=3&s=400"},"minPrice":{"type":"integer","example":100},"maxPrice":{"type":"integer","example":1000}}},"Sight":{"type":"object","required":["id","name","geoposition","images","description","cover","properties"],"properties":{"id":{"type":"integer","example":1},"name":{"type":"string","example":"Excursion name"},"geoposition":{"type":"string","example":"google coordinates"},"images":{"type":"array","items":{"type":"string","example":"https://avatars2.githubusercontent.com/u/7658037?v=3&s=400"}},"description":{"type":"string","example":"description"},"cover":{"type":"string","example":"https://avatars2.githubusercontent.com/u/7658037?v=3&s=400"},"properties":{"type":"array","items":{"type":"object","required":["id","name"],"properties":{"id":{"type":"integer","example":1},"name":{"type":"string","example":"property name"}}}}}},"group_updated":{"type":"object","required":["status","group_id","seats_reserved"],"properties":{"status":{"type":"string","example":"OK"},"group_id":{"type":"integer","example":1},"seats_reserved":{"type":"integer","example":10}}},"default_error":{"type":"object","required":["status","error"],"properties":{"status":{"type":"integer","example":"ERROR"},"error":{"type":"integer","example":1}}},"groups_by_date_and_id":{"type":"object","required":["id","tour_date","seats_reserved","guide_id","seats_capacity","excursion"],"properties":{"id":{"type":"object","example":1},"tour_date":{"type":"string","example":"1970-01-01"},"seats_reserved":{"type":"integer","example":10},"guide_id":{"type":"integer","example":1},"seats_capacity":{"type":"integer","example":100},"excursion":{"$ref":"#/definitions/excursion_full"}}},"category":{"type":"object","required":["id","name"],"properties":{"id":{"type":"integer","example":1},"name":{"type":"string","example":"bus"}}},"picking_place":{"required":["id","name","geoposition"],"properties":{"id":{"type":"integer","example":1},"name":{"type":"string","example":"place name"},"geoposition":{"type":"string","example":"55.7928436646519, 49.1105076950043"}}},"price":{"required":["id","price_for_children","price_for_adult","price_for_enfant"],"properties":{"id":{"type":"integer","example":1},"price_for_children":{"type":"integer","example":500},"price_for_adult":{"type":"integer","example":1000},"price_for_enfant":{"type":"integer","example":500}}},"property":{"required":["id","name","image"],"properties":{"id":{"type":"integer","example":1},"name":{"type":"string","example":"property name"},"image":{"type":"string","example":"https://avatars2.githubusercontent.com/u/7658037?v=3&s=400"}}},"sight_short":{"type":"object","required":["id","name"],"properties":{"id":{"type":"integer","example":1},"name":{"type":"string","example":"property name"}}},"excursion_full":{"required":["id","name","description","capacity","average_rating","duration","linkToSite","images","category","picking_place","price","properties","sight"],"properties":{"id":{"type":"integer","example":1},"name":{"type":"string","example":"excursion name"},"description":{"type":"string","example":"excursion description"},"capacity":{"type":"integer","example":100},"average_rating":{"type":"number","example":5.0},"duration":{"type":"integer","example":200},"linkToSite":{"type":"string","example":"http://swagger.io/"},"images":{"type":"array","items":{"type":"string","example":"https://avatars2.githubusercontent.com/u/7658037?v=3&s=400"}},"category":{"$ref":"#/definitions/category"},"picking_place":{"$ref":"#/definitions/picking_place"},"price":{"$ref":"#/definitions/price"},"properties":{"type":"array","items":{"$ref":"#/definitions/property"}},"sight":{"$ref":"#/definitions/sight_short"}}},"booking_add":{"required":["status","id"],"properties":{"status":{"type":"string","example":"OK"},"id":{"type":"integer","example":1}}},"payment_add":{"required":["status","payment_id","create_datetime"],"properties":{"status":{"type":"string","example":"OK"},"payment_id":{"type":"integer","example":1},"create_datetime":{"type":"string","example":"1970-01-01 00:00:00"}}},"booking_by_tourist_id":{"type":"object","required":["excursion","total_price","payment_id","group"],"properties":{"excursion":{"type":"object","required":["id","name","picking_place","duration"],"properties":{"id":{"type":"integer","example":1},"name":{"type":"string","example":"excursion name"},"picking_place":{"type":"object","required":["id","name"],"properties":{"id":{"type":"integer","example":1},"name":{"type":"string","example":"picking place name"}}},"duration":{"type":"integer","example":200}}},"total_price":{"type":"integer","example":1500},"payment_id":{"type":"integer","example":1},"group":{"type":"object","required":["id","tour_date"],"properties":{"id":{"type":"integer","example":1},"tour_date":{"type":"string","example":"1970-01-01 00:00:00"}}}}},"booking_by_id":{"type":"object","required":["id","adults","children","enfants","total_price","group"],"properties":{"id":{"type":"integer","example":1},"adults":{"type":"integer","example":2},"children":{"type":"integer","example":3},"enfants":{"type":"integer","example":4},"total_price":{"type":"integer","example":1500},"group":{"type":"object","required":["id","tour_date","excursion"],"properties":{"id":{"type":"integer","example":1},"tour_date":{"type":"string","example":"1970-01-01 00:00:00"},"excursion":{"type":"object","required":["id","name","duration","operator","picking_place","properties"],"properties":{"id":{"type":"integer","example":1},"name":{"type":"string","example":"excursion name"},"duration":{"type":"integer","example":200},"operator":{"type":"object","required":["id","name","icon"],"properties":{"id":{"type":"integer","example":1},"name":{"type":"string","example":"operator name"},"logo":{"type":"string","example":"operator logo"}}},"picking_place":{"type":"object","required":["id","name","geoposition"],"properties":{"id":{"type":"integer","example":1},"name":{"type":"string","example":"picking place name"},"geoposition":{"type":"string","example":"-43.12312, 25.3323234"}}},"properties":{"type":"array","items":{"type":"object","required":["id","name","icon"],"properties":{"id":{"type":"integer","example":1},"name":{"type":"string","example":"property name"},"icon":{"type":"string","example":"icon link"}}}}}}}}}},"phone_check":{"type":"object","required":["registered"],"properties":{"registered":{"type":"boolean","example":true}}},"register_user":{"type":"object","required":["status","id"],"properties":{"status":{"type":"string","example":"OK"},"id":{"type":"integer","example":1}}},"tourist_update":{"type":"object","required":["status","id"],"properties":{"status":{"type":"string","example":"OK"},"id":{"type":"integer","example":1}}},"cancel_payment":{"type":"object","required":["status","booking_id","payment_id"],"properties":{"status":{"type":"string","example":"OK"},"payment_id":{"type":"integer","example":1},"booking_id":{"type":"integer","example":1}}}},"host":"188.130.155.89","basePath":"/api/","schemes":["http"]}